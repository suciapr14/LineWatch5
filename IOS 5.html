<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WatchOS Pro Simulator</title>
  <style>
    :root {
      --watch-black: #1a1a1a;
      --watch-black1: rgba(0, 0, 0, 0.3);
      --watch-dark-gray: #2c2c2e;
      --watch-gray: #48484a;
      --watch-light-gray: #636366;
      --watch-white: #ffffff;
      --watch-red: #ff453a;
      --watch-orange: #ff9f0a;
      --watch-yellow: #ffd60a;
      --watch-green: #30d158;
      --watch-blue: #0a84ff;
      --watch-purple: #bf5af2;
      --watch-pink: #ff375f;
      --watch-teal: #5ac8fa;
      --watch-indigo: #5856d6;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', sans-serif;
      -webkit-tap-highlight-color: #ffffff;
      user-select: none;
      -webkit-font-smoothing: antialiased;
    }

    body {
      background-color: #ffffff;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      overflow: hidden;
      touch-action: manipulation;
    }

    .watch-container {
      width: 320px;
      height: 460px;
      background-color: var(--watch-dark-gray);
      border-radius: 35px;
      position: relative;
      overflow: hidden;
      box-shadow: 
        0 0 0 8px #111,
        0 0 30px rgba(0, 0, 0, 0.8),
        0 0 60px rgba(0, 0, 0, 0.1);
      border: 3px solid rgba(255, 255, 255, 0.3);
      transform: scale(0.95);
      transition: transform 0.3s ease;
    }

    .watch-container:hover {
      transform: scale(1);
    }

    .watch-face {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: var(--watch-black);
      z-index: 1;
      transition: opacity 0.3s ease, transform 0.3s ease;
      overflow: hidden;
    }
    
    .control-center {
      position: absolute;
      bottom: -515px;
      left: 40px;
      width: 280px;
      height: 240px;
      background: rgba(40, 40, 40, 0.95);
      backdrop-filter: blur(30px);
      border-radius: 35px;
      padding: 20px;
      transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1);
      z-index: 35;
      box-shadow: 0 -10px 30px rgba(0,0,0,0.5);
      border-top: 1px solid rgba(255,255,255,0.1);
    }
    
    .control-center.show {
      transform: translateY(-630px);
    }
    
    .cc-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }
    
    .cc-title {
      color: white;
      font-weight: 600;
      font-size: 4px;
    }
    
    .cc-close {
      color: white;
      font-size: 8px;
      width: 10px;
      height: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      background: rgba(255,255,255,0.1);
    }
    
    .cc-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 8px;
    }
    
    .cc-item {
      background: rgba(255,255,255,0.1);
      border-radius: 15px;
      padding: 12px;
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
      transition: all 0.1s;
    }
    
    .cc-item.big {
      grid-column: span 2;
      flex-direction: row;
      justify-content: center;
      gap: 8px;
    }
    
    .cc-item:active {
      transform: scale(0.95);
      background: rgba(255,255,255,0.2);
    }
    
    .cc-icon {
      font-size: 8px;
      margin-bottom: 5px;
    }
    
    .cc-item.big .cc-icon {
      margin-bottom: 0;
      font-size: 8px;
    }
    
    .cc-label {
      color: white;
      font-size: 8px;
      text-align: center;
    }
    
    .cc-toggle {
      position: absolute;
      top: 10px;
      right: 10px;
      width: 10ppx;
      height: 5px;
      border-radius: 50%;
      border: 2px solid rgba(255,255,255,0.3);
    }
    
    .cc-toggle.active {
      background: #0a84ff;
      border-color: #0a84ff;
    }
    
    .status-bar {
      position: absolute;
      top: 20px;
      left: 0;
      width: 100%;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 30px;
      z-index: 5;
    }

    .time {
      color: var(--watch-white);
      font-size: 16px;
      font-weight: 600;
      text-shadow: 0 1px 2px rgba(0,0,0,0.3);
    }

    .battery {
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .battery-level {
      font-size: 12px;
      color: var(--watch-white);
      text-shadow: 0 1px 2px rgba(0,0,0,0.3);
    }

    .battery-icon {
      width: 22px;
      height: 10px;
      border: 1px solid var(--watch-white);
      border-radius: 2px;
      position: relative;
    }

    .battery-icon::after {
      content: '';
      position: absolute;
      right: -3px;
      top: 50%;
      transform: translateY(-50%);
      width: 2px;
      height: 4px;
      background: var(--watch-white);
      border-radius: 3px;
    }

    .battery-fill {
      position: absolute;
      top: 1px;
      left: 1px;
      bottom: 1px;
      width: 80%;
      background-color: var(--watch-green);
      border-radius: 3px;
      transition: width 0.5s ease, background-color 0.5s ease;
    }

    .app-grid {
      position: absolute;
      top: 60px;
      left: 0;
      width: 100%;
      height: calc(100% - 60px);
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      grid-template-rows: repeat(5, 1fr);
      gap: 10px;
      padding: 15px;
      z-index: 2;
    }

    .app-icon {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      border-radius: 20px;
      background-color: var(--watch-black1);
      color: var(--watch-white);
      cursor: pointer;
      transition: all 0.2s ease;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
      backdrop-filter: blur(1px);
      border: 1px solid rgba(255,255,255,0.3);
    }

    .app-icon:hover {
      background-color: var(--watch-gray);
      transform: scale(1.05);
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }

    .app-icon:active {
      transform: scale(0.95);
    }

    .app-icon span {
      font-size: 32px;
      margin-bottom: 5px;
      transition: transform 0.1s;
    }

    .app-icon:hover span {
      transform: scale(1.1);
    }

    .app-icon p {
      font-size: 10px;
      font-weight: 500;
      text-align: center;
      padding: 0 5px;
      text-shadow: 0 1px 2px rgba(0,0,0,0.3);
    }

    .modal {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.8);
      display: none;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 20;
      backdrop-filter: blur(20px);
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .modal.show {
      opacity: 1;
      display: flex;
    }

    .modal-content {
      background-color: var(--watch-dark-gray);
      width: 90%;
      max-width: 300px;
      border-radius: 25px;
      padding: 20px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
      transform: scale(0.95);
      transition: transform 0.3s ease;
    }

    .modal.show .modal-content {
      transform: scale(1);
    }

    .modal-title {
      color: var(--watch-white);
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 15px;
      text-align: center;
    }

    .modal-input {
      width: 100%;
      padding: 12px 15px;
      margin-bottom: 15px;
      border-radius: 10px;
      border: none;
      background-color: var(--watch-gray);
      color: var(--watch-white);
      font-size: 14px;
      transition: background-color 0.1s;
    }

    .modal-input:focus {
      outline: none;
      background-color: var(--watch-light-gray);
    }

    .modal-buttons {
      display: flex;
      gap: 10px;
      margin-top: 20px;
    }

    .modal-button {
      flex: 1;
      padding: 12px;
      border-radius: 10px;
      border: none;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .modal-button.primary {
      background-color: var(--watch-blue);
      color: var(--watch-white);
    }

    .modal-button.secondary {
      background-color: var(--watch-gray);
      color: var(--watch-white);
    }

    .modal-button:hover {
      opacity: 0.9;
      transform: translateY(-2px);
    }

    .modal-button:active {
      transform: translateY(0) scale(0.98);
    }

    .app-window {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border-radius: 25px;
      background-color: var(--watch-dark-gray);
      z-index: 15;
      display: none;
      flex-direction: column;
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.3s ease, transform 0.3s ease;
    }

    .app-window.show {
      opacity: 1;
      transform: translateY(0);
      display: flex;
    }

    .app-header {
      padding: 15px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      background-color: var(--watch-dark-gray);
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }

    .app-title {
      color: var(--watch-white);
      font-size: 16px;
      font-weight: 600;
    }

    .close-button {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      background-color: var(--watch-gray);
      color: var(--watch-white);
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.1s;
    }

    .close-button:hover {
      background-color: var(--watch-light-gray);
      transform: scale(1.1);
    }

    .close-button:active {
      transform: scale(0.9);
    }

    .app-content {
      flex: 1;
      overflow: hidden;
      padding: 0;
    }

    .app-content iframe {
      width: 100%;
      height: 100%;
      border: none;
      display: block;
      background-color: var(--watch-dark-gray);
    }

    .settings-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 20px;
      border-bottom: 1px solid var(--watch-gray);
      color: var(--watch-white);
      cursor: pointer;
      transition: background-color 0.1s;
    }

    .settings-item:hover {
      background-color: rgba(255,255,255,0.05);
    }

    .settings-item:last-child {
      border-bottom: none;
    }

    .settings-item-title {
      font-size: 14px;
    }

    .settings-item-value {
      font-size: 14px;
      color: var(--watch-light-gray);
    }

    .toggle-switch {
      position: relative;
      width: 50px;
      height: 30px;
    }

    .toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: var(--watch-gray);
      transition: .4s;
      border-radius: 34px;
    }

    .toggle-slider:before {
      position: absolute;
      content: "";
      height: 26px;
      width: 26px;
      left: 2px;
      bottom: 2px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
    }

    input:checked + .toggle-slider {
      background-color: var(--watch-blue);
    }

    input:checked + .toggle-slider:before {
      transform: translateX(20px);
    }
    .player-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      flex: 1;
    }

    .album-art {
      width: 180px;
      height: 180px;
      border-radius: 20px;
      background-color: var(--watch-gray);
      margin-bottom: 20px;
      overflow: hidden;
      position: relative;
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    }

    .album-art img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .album-art-placeholder {
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 50px;
      color: rgba(255,255,255,0.2);
    }

    .song-info {
      text-align: center;
      margin-bottom: 20px;
      width: 100%;
    }

    .song-title {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 5px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .song-artist {
      font-size: 14px;
      color: var(--watch-light-gray);
    }

    .progress-container {
      width: 100%;
      margin-bottom: 15px;
    }

    .progress-bar {
      width: 100%;
      height: 4px;
      background-color: var(--watch-gray);
      border-radius: 2px;
      margin-bottom: 5px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background-color: var(--watch-blue);
      width: 0%;
      border-radius: 2px;
      transition: width 0.1s linear;
    }

    .time-display {
      display: flex;
      justify-content: space-between;
      font-size: 12px;
      color: var(--watch-light-gray);
    }

    .controls {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 25px;
      margin-bottom: 20px;
    }

    .control-button {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background-color: var(--watch-gray);
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.1s;
    }

    .control-button:hover {
      transform: scale(1.1);
      background-color: var(--watch-light-gray);
    }

    .control-button:active {
      transform: scale(0.95);
    }

    .play-button {
      width: 60px;
      height: 60px;
      font-size: 24px;
      background-color: var(--watch-blue);
    }

    .play-button:hover {
      background-color: #1a93ff;
    }

    .volume-control {
      width: 100%;
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 15px;
    }

    .volume-icon {
      font-size: 14px;
    }

    .volume-slider {
      flex: 1;
      height: 4px;
      background-color: var(--watch-gray);
      border-radius: 2px;
      position: relative;
      cursor: pointer;
    }

    .volume-slider-fill {
      height: 100%;
      background-color: var(--watch-blue);
      width: 70%;
      border-radius: 2px;
    }

    .playlist-toggle {
      display: flex;
      justify-content: center;
      margin-bottom: 15px;
    }

    .toggle-button {
      padding: 8px 16px;
      background-color: var(--watch-gray);
      border-radius: 20px;
      font-size: 12px;
      cursor: pointer;
      transition: all 0.1s;
    }

    .toggle-button:hover {
      background-color: var(--watch-light-gray);
    }

    .playlist-container {
      flex: 1;
      overflow-y: auto;
      background-color: var(--watch-dark-gray);
      border-radius: 15px;
      padding: 10px;
      display: none;
    }

    .playlist-container.show {
      display: block;
    }

    .playlist-item {
      display: flex;
      align-items: center;
      padding: 10px;
      border-radius: 10px;
      margin-bottom: 8px;
      background-color: rgba(255,255,255,0.05);
      cursor: pointer;
      transition: all 0.1s;
    }

    .playlist-item:hover {
      background-color: rgba(255,255,255,0.1);
    }

    .playlist-item.active {
      background-color: rgba(10, 132, 255, 0.2);
      border-left: 3px solid var(--watch-blue);
    }

    .playlist-item-icon {
      margin-right: 12px;
      font-size: 18px;
    }

    .playlist-item-info {
      flex: 1;
      overflow: hidden;
    }

    .playlist-item-title {
      font-size: 14px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .playlist-item-artist {
      font-size: 12px;
      color: var(--watch-light-gray);
    }

    .playlist-item-duration {
      font-size: 12px;
      color: var(--watch-light-gray);
      margin-left: 10px;
    }

    .playlist-item-delete {
      width: 25px;
      height: 25px;
      border-radius: 50%;
      background-color: rgba(255,55,95,0.2);
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 12px;
      margin-left: 10px;
      color: var(--watch-pink);
      opacity: 0;
      transition: opacity 0.2s;
    }

    .playlist-item:hover .playlist-item-delete {
      opacity: 1;
    }

    .import-button {
      padding: 12px;
      background-color: var(--watch-blue);
      border-radius: 15px;
      text-align: center;
      font-weight: 500;
      cursor: pointer;
      margin-top: 10px;
      transition: all 0.1s;
    }

    .import-button:hover {
      background-color: #1a93ff;
      transform: translateY(-2px);
    }

    .import-button:active {
      transform: translateY(0);
    }

    /* Dynamic Island */
    .dynamic-island {
      position: fixed;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      width: 120px;
      height: 35px;
      background-color: var(--watch-black);
      border-radius: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
      border: 1px solid rgba(255,255,255,0.1);
      overflow: hidden;
      transition: all 0.3s ease;
    }

    .dynamic-island.minimized {
      width: 35px;
    }

    .dynamic-island-content {
      display: flex;
      align-items: center;
      width: 100%;
      padding: 0 15px;
      transition: opacity 0.3s;
    }

    .dynamic-island.minimized .dynamic-island-content {
      opacity: 0;
    }

    .dynamic-island-icon {
      font-size: 16px;
      margin-right: 10px;
    }

    .dynamic-island-progress {
      flex: 1;
      height: 4px;
      background-color: var(--watch-gray);
      border-radius: 2px;
      overflow: hidden;
    }

    .dynamic-island-progress-fill {
      height: 100%;
      background-color: var(--watch-blue);
      width: 0%;
    }

    .dynamic-island-song {
      font-size: 12px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      flex: 1;
    }

    .dynamic-island-minimized-icon {
      position: absolute;
      font-size: 16px;
      opacity: 0;
      transition: opacity 0.3s;
    }

    .dynamic-island.minimized .dynamic-island-minimized-icon {
      opacity: 1;
    }

    /* Animation */
    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    .spinning {
      animation: spin 2s linear infinite;
    }

    /* Custom scrollbar */
    ::-webkit-scrollbar {
      width: 5px;
    }

    ::-webkit-scrollbar-track {
      background: transparent;
    }

    ::-webkit-scrollbar-thumb {
      background: var(--watch-gray);
      border-radius: 5px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: var(--watch-light-gray);
    }

    .navigation-bar {
      position: absolute;
      bottom: 0px;
      left: 50%;
      transform: translateX(-50%);
      width: 320px;
      height: 45px;
      background-color: rgba(1, 1, 1, 0.4);
      backdrop-filter: blur(35px);
      border-top: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 0 0 35px 35px;
      display: flex;
      justify-content: space-around;
      align-items: center;
      padding: 0 20px;
      z-index: 25;
      transition: transform 0.3s ease;
    }

    .navigation-bar.hidden {
      transform: translateX(-50%) translateY(100%);
    }

    .nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: transform 0.1s;
      flex: 1;
    }

    .nav-item:active {
      transform: scale(1);
    }

    .nav-icon {
      width: 14px;
      height: 14px;
      font-size: 15px;
      margin-bottom: 8px;
      color: var(--watch-white);
      transition: transform 0.1s;
    }

    .nav-item:hover .nav-icon {
      transform: scale(1.5);
    }

    .nav-label {
      font-size: 12px;
      color: var(--watch-white);
      opacity: 0.6;
      transition: opacity 0.1s;
    }

    .nav-item:hover .nav-label {
      opacity: 1;
    }

    .lock-screen {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: var(--watch-black);
      display: none;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 30;
      border-radius: 35px;
      opacity: 0.5;
      transform: translateY(20px);
      transition: opacity 0.3s ease, transform 0.3s ease;
      background-size: 20px 20px;
    }

    .lock-screen.show {
      opacity: 1;
      transform: translateY(0);
      display: flex;
    }

    .lock-time {
      font-size: 48px;
      font-weight: 300;
      color: var(--watch-white);
      margin-bottom: 5px;
      text-shadow: 0 2px 4px rgba(0,0,0,0.5);
    }

    .lock-date {
      font-size: 16px;
      color: var(--watch-white);
      opacity: 0.8;
      margin-bottom: 30px;
      text-shadow: 0 1px 2px rgba(0,0,0,0.3);
    }

    .unlock-btn {
      background: linear-gradient(135deg, var(--watch-blue), var(--watch-indigo));
      color: var(--watch-white);
      border: none;
      border-radius: 25px;
      padding: 12px 40px;
      font-size: 18px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.1s;
      box-shadow: 0 4px 15px rgba(10, 132, 255, 0.3);
      position: relative;
      overflow: hidden;
    }

    .unlock-btn span {
      position: relative;
      z-index: 1;
    }

    .unlock-btn:active {
      transform: scale(0.8);
      border-radius: 25px;
    }

    .unlock-btn::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, var(--watch-indigo), var(--watch-blue));
      opacity: 0;
      transition: opacity 0.1s;
    }

    .unlock-btn:hover::after {
      opacity: 1;
    }

    .lock-screen-active .watch-face {
      opacity: 0;
      transform: scale(0.95);
      pointer-events: none;
    }

    .background-toggle {
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
      justify-content: center;
    }

    .toggle-option {
      padding: 8px 12px;
      background-color: var(--watch-gray);
      border-radius: 20px;
      cursor: pointer;
      user-select: none;
      color: var(--watch-white);
      font-size: 12px;
      transition: all 0.1s;
    }

    .toggle-option.active {
      background-color: var(--watch-blue);
      color: white;
      box-shadow: 0 2px 8px rgba(10, 132, 255, 0.3);
    }

    .toggle-option:hover {
      transform: translateY(-2px);
    }

    .toggle-option:active {
      transform: translateY(0);
    }

    .notifications {
      position: absolute;
      top: 60px;
      right: 20px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      z-index: 40;
      max-width: 280px;
    }

    .notification {
      background-color: var(--watch-dark-gray);
      border-radius: 15px;
      padding: 12px 15px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
      transform: translateX(100%);
      opacity: 0;
      transition: transform 0.3s ease, opacity 0.3s ease;
      border-left: 4px solid var(--watch-blue);
    }

    .notification.show {
      transform: translateX(0);
      opacity: 1;
    }

    .notification-title {
      font-weight: 600;
      color: var(--watch-white);
      margin-bottom: 5px;
      font-size: 14px;
    }

    .notification-message {
      color: var(--watch-light-gray);
      font-size: 12px;
    }

    .app-icon-badge {
      position: absolute;
      top: -5px;
      right: -5px;
      background-color: var(--watch-red);
      color: white;
      border-radius: 50%;
      width: 16px;
      height: 16px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 10px;
      font-weight: bold;
    }

    .watch-face-bg {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      z-index: -1;
      filter: brightness(0.7);
    }

    .watch-face-content {
      position: relative;
      z-index: 1;
      height: 100%;
      width: 100%;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes scaleIn {
      from { transform: scale(0.9); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    .fade-in {
      animation: fadeIn 0.3s ease-out;
    }

    .scale-in {
      animation: scaleIn 0.3s ease-out;
    }

    html.not-in-iframe .navigation-bar {
      display: flex;
    }

    /* Performance optimizations */
    .will-change {
      will-change: transform, opacity;
    }

    /* Haptic feedback simulation */
    @keyframes haptic {
      0% { transform: translateX(0); }
      20% { transform: translateX(-2px); }
      40% { transform: translateX(2px); }
      60% { transform: translateX(-2px); }
      80% { transform: translateX(2px); }
      100% { transform: translateX(0); }
    }

    .haptic {
      animation: haptic 0.3s ease;
    }
    
  </style>
</head>
<body>
  <div class="watch-container">
    <!-- Lock Screen -->
    <div class="lock-screen" id="lockScreen">
      <div class="lock-time" id="lockTime">error</div>
      <div class="lock-date" id="lockDate">error</div>
      <button class="unlock-btn" onclick="toggleLockScreen()">
        <span>Unlock</span>
      </button>
    </div>

    <!-- Watch face -->
    <div class="watch-face">
      <div class="watch-face-bg" id="watchFaceBg"></div>
      <div class="watch-face-content">
        <!-- Status bar -->
        <div class="status-bar">
          <div class="time" id="time">error</div>
          <div class="battery">
            <div class="battery-level" id="batteryLevel">error</div>
            <div class="battery-icon">
              <div class="battery-fill" id="batteryFill"></div>
            </div>
          </div>
        </div>

        <!-- Icon App -->
        <div class="app-grid" id="appGrid">
          <div class="app-icon" onclick="openFileManager()">
            <span>📁</span>
            <p>Files</p>
          </div>
          <div class="app-icon" onclick="openSettings()">
            <span>⚙️</span>
            <p>Settings</p>
            <div class="app-icon-badge" id="settingsBadge" style="display: none;">1</div>
          </div>
          <!-- More apps will be added here dynamically -->
        </div>
      </div>
    </div>

    <!-- File manager -->
    <div class="modal" id="fileManagerModal">
      <div class="modal-content scale-in">
        <div class="modal-title">File Manager</div>
        <div class="background-toggle">
          <div class="toggle-option active" onclick="setBackgroundOption('cover')">Cover</div>
          <div class="toggle-option" onclick="setBackgroundOption('contain')">Fit</div>
        </div>
        <input type="file" id="backgroundFile" class="modal-input" accept="image/*" onchange="changeBackground(event)">
        <input type="text" id="appName" class="modal-input" placeholder="App Name">
        <input type="text" id="appEmoji" class="modal-input" placeholder="App Icon (emoji)" maxlength="2">
        <input type="file" id="htmlFile" class="modal-input" accept=".html,.htm" onchange="installApp(event)">
        <div class="modal-buttons">
          <button class="modal-button secondary" onclick="closeFileManager()">Cancel</button>
          <button class="modal-button primary" onclick="installFromForm()">Install</button>
        </div>
      </div>
    </div>
    <div class="app-header">
    <div class="app-title">Music Player</div>
    <div class="close-button" onclick="window.parent.closeAppWindow()">✕</div>
  </div>

  <div class="app-content">
    <div class="player-container">
      <div class="album-art">
        <div class="album-art-placeholder">🎵</div>
      </div>

      <div class="song-info">
        <div class="song-title">No song selected</div>
        <div class="song-artist">Select a song from playlist</div>
      </div>

      <div class="progress-container">
        <div class="progress-bar">
          <div class="progress-fill"></div>
        </div>
        <div class="time-display">
          <span class="current-time">0:00</span>
          <span class="duration">0:00</span>
        </div>
      </div>

      <div class="controls">
        <div class="control-button" onclick="skipBackward()">⏮</div>
        <div class="control-button" onclick="togglePlay()">⏯</div>
        <div class="control-button" onclick="skipForward()">⏭</div>
      </div>

      <div class="volume-control">
        <div class="volume-icon">🔊</div>
        <div class="volume-slider" onclick="setVolume(event)">
          <div class="volume-slider-fill"></div>
        </div>
      </div>

      <div class="playlist-toggle">
        <div class="toggle-button" onclick="togglePlaylist()">Show Playlist</div>
      </div>

      <div class="playlist-container" id="playlistContainer">
        <!-- Playlist items will be added here -->
      </div>

      <div class="import-button" onclick="document.getElementById('fileInput').click()">
        Import Music
      </div>
      <input type="file" id="fileInput" accept="audio/*" style="display: none;" onchange="handleFileImport(event)">
    </div>
  </div>

  <!-- Dynamic Island -->
  <div class="dynamic-island minimized" id="dynamicIsland">
    <div class="dynamic-island-content">
      <div class="dynamic-island-icon">🎵</div>
      <div class="dynamic-island-progress">
        <div class="dynamic-island-progress-fill"></div>
      </div>
      <div class="dynamic-island-song">No song playing</div>
    </div>
    <div class="dynamic-island-minimized-icon">🎵</div>
  </div>

    <!-- App window -->
    <div class="app-window" id="appWindow">
      <div class="app-header">
        <div class="app-title" id="appTitle">App</div>
        <div class="close-button" onclick="closeAppWindow()">✕</div>
      </div>
      <div class="app-content">
        <iframe id="appFrame" class="app-content" sandbox="allow-scripts allow-same-origin"></iframe>
      </div>
    </div>

    <!-- Settings app -->
    <div class="app-window" id="settingsApp">
      <div class="app-header">
        <div class="app-title">Settings</div>
        <div class="close-button" onclick="closeSettings()">✕</div>
      </div>
      <div class="app-content">
        <div class="settings-item">
          <div class="settings-item-title">Dark Mode</div>
          <label class="toggle-switch">
            <input type="checkbox" id="darkModeToggle" checked>
            <span class="toggle-slider"></span>
          </label>
        </div>
        <div class="settings-item">
          <div class="settings-item-title">24-Hour Time</div>
          <label class="toggle-switch">
            <input type="checkbox" id="clockFormatToggle" checked>
            <span class="toggle-slider"></span>
          </label>
        </div>
        <div class="settings-item" onclick="resetBackground()">
          <div class="settings-item-title">Reset Background</div>
          <div class="settings-item-value">→</div>
        </div>
        <div class="settings-item" onclick="resetAllApps()">
          <div class="settings-item-title">Reset All Apps</div>
          <div class="settings-item-value">→</div>
        </div>
        <div class="settings-item" onclick="showSystemInfo()">
          <div class="settings-item-title">System Information</div>
          <div class="settings-item-value">→</div>
        </div>
        <div class="settings-item">
          <div class="settings-item-title">Installed Apps</div>
          <div class="settings-item-value" id="installedAppsCount">0</div>
        </div>
        <div class="settings-item" onclick="showAbout()">
          <div class="settings-item-title">About WatchOS</div>
          <div class="settings-item-value">→</div>
        </div>
      </div>
    </div>

    <!-- System Info Modal -->
    <div class="modal" id="systemInfoModal">
      <div class="modal-content scale-in">
        <div class="modal-title">System Information</div>
        <div style="color: var(--watch-white); margin-bottom: 15px; font-size: 14px;">
          <p>WatchOS Pro Simulator</p>
          <p>Version 2.0</p>
          <p>Memory: <span id="memoryUsage">Calculating...</span></p>
          <p>Storage: <span id="storageUsage">Calculating...</span></p>
          <p>Battery: <span id="sysBatteryLevel">Loading...</span></p>
          <p>Last Updated: <span id="lastUpdated">Today</span></p>
        </div>
        <div class="modal-buttons">
          <button class="modal-button primary" onclick="closeSystemInfo()">OK</button>
        </div>
      </div>
    </div>

    <!-- About Modal -->
    <div class="modal" id="aboutModal">
      <div class="modal-content scale-in">
        <div class="modal-title">About WatchOS</div>
        <div style="color: var(--watch-white); margin-bottom: 15px; font-size: 14px; text-align: center;">
          <p>WatchOS Pro Simulator</p>
          <p>Version 2.0</p>
          <p>Created with HTML, CSS & JavaScript</p>
          <p>© 2023 WatchOS Simulator Project</p>
        </div>
        <div class="modal-buttons">
          <button class="modal-button primary" onclick="closeAbout()">OK</button>
        </div>
      </div>
    </div>

    <!-- Navigation Bar -->
    <div class="navigation-bar" id="navigationBar">
      <div class="nav-item" onclick="toggleLockScreen()">
        <div class="nav-icon">🔒</div>
        <div class="nav-label">Lock</div>
      </div>
      <div class="nav-item" onclick="openFileManager()">
        <div class="nav-icon">📁</div>
        <div class="nav-label">Files</div>
      </div>
      <div class="nav-item" onclick="openSettings()">
        <div class="nav-icon">⚙️</div>
        <div class="nav-label">Settings</div>
      </div>
    </div>

    <!-- Notifications Area -->
    <div class="notifications" id="notifications"></div>
  </div>
 <!-- Control Center -->
<div class="control-center" id="controlCenter">
  <div class="cc-header">
    <span class="cc-title">Control Center</span>
    <div class="cc-close" onclick="hideControlCenter()">✕</div>
  </div>
  
  <div class="cc-grid">
    <!-- Toggle Items -->
    <div class="cc-item" onclick="toggleSetting('airplane')">
      <div class="cc-icon">✈️</div>
      <div class="cc-label">Airplane</div>
      <div class="cc-toggle" id="airplaneToggle"></div>
    </div>
    
    <div class="cc-item" onclick="toggleSetting('wifi')">
      <div class="cc-icon">📶</div>
      <div class="cc-label">Wi-Fi</div>
      <div class="cc-toggle" id="wifiToggle"></div>
    </div>
    
    <div class="cc-item" onclick="toggleSetting('bluetooth')">
      <div class="cc-icon">🔵</div>
      <div class="cc-label">Bluetooth</div>
      <div class="cc-toggle" id="bluetoothToggle"></div>
    </div>
    
    <div class="cc-item" onclick="toggleSetting('darkMode')">
      <div class="cc-icon">🌙</div>
      <div class="cc-label">Dark Mode</div>
      <div class="cc-toggle" id="darkModeToggle"></div>
    </div>
    
    <!-- Action Buttons -->
    <div class="cc-item big" onclick="triggerFlashlight()">
      <div class="cc-icon">🔦</div>
      <div class="cc-label">Flashlight</div>
    </div>
    
    <div class="cc-item big" onclick="pingPhone()">
      <div class="cc-icon">📱</div>
      <div class="cc-label">Find Phone</div>
    </div>
  </div>
</div>

  <script>
    // Enhanced WatchOS Simulator
    // Global variables
    let installedApps = JSON.parse(localStorage.getItem('installedApps')) || [];
    let is24HourFormat = true;
    let isDarkMode = true;
    let inactivityTimer;
    let backgroundOption = 'cover';
    let currentBlobUrl = null;
    let notificationId = 0;
    let navBarHidden = false;
    let lastBatteryLevel = 80;

    // Initialize the watch with enhanced features
    function initWatch() {
      updateTime();
      setInterval(updateTime, 1000);
      updateBattery();
      setInterval(updateBattery, 30000); // Update battery more frequently
      renderInstalledApps();
      updateInstalledAppsCount();
      loadBackground();
      checkForUpdates();
      setupEventListeners();
      showWelcomeNotification();
      startBatterySimulation();
      
      // Check if this is a first run
      if (!localStorage.getItem('firstRun')) {
        localStorage.setItem('firstRun', 'completed');
        showNotification('Welcome', 'Welcome to WatchOS Pro Simulator!');
      }
    }

    // Time functions with enhanced formatting
    function updateTime() {
      const now = new Date();
      let hours = now.getHours();
      let minutes = now.getMinutes().toString().padStart(2, '0');
      let seconds = now.getSeconds().toString().padStart(2, '0');
      let timeString;
      
      if (is24HourFormat) {
        timeString = `${hours.toString().padStart(2, '0')}:${minutes}`;
      } else {
        const ampm = hours >= 12 ? 'PM' : 'AM';
        hours = hours % 12;
        hours = hours ? hours : 12; // Convert 0 to 12
        timeString = `${hours}:${minutes} ${ampm}`;
      }
      
      document.getElementById('time').textContent = timeString;
    }

    function updateLockTime() {
      const now = new Date();
      if (is24HourFormat) {
        document.getElementById('lockTime').textContent = now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit', hour12: false});
      } else {
        document.getElementById('lockTime').textContent = now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
      }
      document.getElementById('lockDate').textContent = now.toLocaleDateString('en-US', {weekday: 'long', day: 'numeric', month: 'long'});
    }

    // Battery functions with more realistic simulation
    function updateBattery() {
      // Simulate more realistic battery drain
      if (lastBatteryLevel <= 5) {
        // If battery is very low, sometimes it jumps back up a bit
        lastBatteryLevel = Math.random() < 0.3 ? 10 + Math.floor(Math.random() * 10) : lastBatteryLevel - 1;
      } else if (lastBatteryLevel <= 20) {
        // If battery is low, drain faster
        lastBatteryLevel -= 1 + Math.floor(Math.random() * 3);
      } else {
        // Normal drain
        lastBatteryLevel -= Math.floor(Math.random() * 2);
      }
      
      // Ensure battery doesn't go below 1% or above 100%
      lastBatteryLevel = Math.max(1, Math.min(100, lastBatteryLevel));
      
      document.getElementById('batteryLevel').textContent = `${lastBatteryLevel}%`;
      document.getElementById('batteryFill').style.width = `${lastBatteryLevel}%`;
      
      const batteryFill = document.getElementById('batteryFill');
      if (lastBatteryLevel <= 10) {
        batteryFill.style.backgroundColor = 'var(--watch-red)';
        if (lastBatteryLevel === 10) {
          showNotification('Battery Low', '10% battery remaining. Charge soon.');
        }
      } else if (lastBatteryLevel <= 30) {
        batteryFill.style.backgroundColor = 'var(--watch-orange)';
      } else {
        batteryFill.style.backgroundColor = 'var(--watch-green)';
      }
      
      // Update system info battery level
      document.getElementById('sysBatteryLevel').textContent = `${lastBatteryLevel}%`;
    }

    // More realistic battery simulation
    function startBatterySimulation() {
      setInterval(() => {
        // Random events that might affect battery
        if (Math.random() < 0.05) {
          // Sudden drop (heavy usage)
          lastBatteryLevel = Math.max(1, lastBatteryLevel - Math.floor(Math.random() * 10));
        } else if (Math.random() < 0.03 && lastBatteryLevel < 90) {
          // Small charge
          lastBatteryLevel = Math.min(100, lastBatteryLevel + Math.floor(Math.random() * 5));
        }
        updateBattery();
      }, 60000); // Check every minute
    }

    // File manager functions with better error handling
    function openFileManager() {
      document.getElementById('fileManagerModal').classList.add('show');
      hapticFeedback();
    }

    function closeFileManager() {
      document.getElementById('fileManagerModal').classList.remove('show');
      document.getElementById('appName').value = '';
      document.getElementById('appEmoji').value = '';
      document.getElementById('htmlFile').value = '';
      document.getElementById('backgroundFile').value = '';
    }

    function setBackgroundOption(option) {
      backgroundOption = option;
      const options = document.querySelectorAll('.toggle-option');
      options.forEach(opt => opt.classList.remove('active'));
      event.target.classList.add('active');
      
      // Update current background with new option
      const currentBg = document.getElementById('watchFaceBg').style.backgroundImage;
      if (currentBg) {
        document.getElementById('watchFaceBg').style.backgroundSize = option;
      }
      
      hapticFeedback();
    }

    function changeBackground(event) {
      const file = event.target.files[0];
      if (file && file.type.startsWith('image')) {
        const reader = new FileReader();
        reader.onload = function(e) {
          const watchFaceBg = document.getElementById('watchFaceBg');
          watchFaceBg.style.backgroundImage = `url(${e.target.result})`;
          watchFaceBg.style.backgroundSize = backgroundOption;
          watchFaceBg.style.backgroundRepeat = 'no-repeat';
          watchFaceBg.style.backgroundPosition = 'center';
          
          // Save to localStorage
          localStorage.setItem('watchBackground', e.target.result);
          localStorage.setItem('backgroundOption', backgroundOption);
          
          showNotification('Wallpaper', 'New wallpaper applied successfully');
          hapticFeedback();
        };
        reader.readAsDataURL(file);
      }
    }

    function loadBackground() {
      const savedBg = localStorage.getItem('watchBackground');
      const savedOption = localStorage.getItem('backgroundOption') || 'cover';
      
      if (savedBg) {
        const watchFaceBg = document.getElementById('watchFaceBg');
        watchFaceBg.style.backgroundImage = `url(${savedBg})`;
        watchFaceBg.style.backgroundSize = savedOption;
        watchFaceBg.style.backgroundRepeat = 'no-repeat';
        watchFaceBg.style.backgroundPosition = 'center';
        
        // Set the toggle option
        backgroundOption = savedOption;
        const options = document.querySelectorAll('.toggle-option');
        options.forEach(opt => opt.classList.remove('active'));
        document.querySelector(`.toggle-option[onclick="setBackgroundOption('${savedOption}')"]`).classList.add('active');
      }
    }

    function installFromForm() {
      const fileInput = document.getElementById('htmlFile');
      if (fileInput.files.length > 0) {
        installApp({ target: fileInput });
      } else {
        showNotification('Error', 'Please select an HTML file first');
        hapticFeedback('error');
      }
    }

    function installApp(event) {
      const file = event.target.files[0];
      const name = document.getElementById('appName').value.trim();
      const emoji = document.getElementById('appEmoji').value.trim();

      if (!name || !emoji) {
        showNotification('Error', 'Please enter both app name and emoji');
        event.target.value = '';
        hapticFeedback('error');
        return;
      }

      if (file && (file.name.endsWith('.html') || file.name.endsWith('.htm'))) {
        const reader = new FileReader();
        reader.onload = function(e) {
          const htmlContent = e.target.result;
          
          // Validate the HTML content
          if (!htmlContent.includes('<html') && !htmlContent.includes('<body')) {
            showNotification('Error', 'App must be a complete HTML document');
            hapticFeedback('error');
            return;
          }
          
          // Add to installed apps
          const appId = 'app-' + Date.now();
          installedApps.push({
            id: appId,
            name: name,
            emoji: emoji,
            content: htmlContent,
            installDate: new Date().toISOString()
          });
          localStorage.setItem('installedApps', JSON.stringify(installedApps));
          
          // Update UI
          renderInstalledApps();
          updateInstalledAppsCount();
          closeFileManager();
          
          showNotification('App Installed', `${name} was installed successfully`);
          hapticFeedback('success');
        };
        reader.readAsText(file);
      } else {
        showNotification('Error', 'Please select a valid HTML file');
        hapticFeedback('error');
      }
    }

    function renderInstalledApps() {
      const appGrid = document.getElementById('appGrid');
      // Clear existing apps (keep the first two default apps)
      while (appGrid.children.length > 2) {
        appGrid.removeChild(appGrid.lastChild);
      }
      
      // Add installed apps
      installedApps.forEach(app => {
        const appIcon = document.createElement('div');
        appIcon.className = 'app-icon';
        appIcon.innerHTML = `
          <span>${app.emoji}</span>
          <p>${app.name}</p>
        `;
        appIcon.onclick = () => {
          openAppWindow(app.name, app.content);
          hapticFeedback();
        };
        appGrid.appendChild(appIcon);
      });
    }

    function updateInstalledAppsCount() {
      document.getElementById('installedAppsCount').textContent = installedApps.length;
    }

    function openAppWindow(name, content) {
      const appFrame = document.getElementById('appFrame');
      const appWindow = document.getElementById('appWindow');
      const appTitle = document.getElementById('appTitle');

      appTitle.textContent = name;
      appWindow.classList.add('show');
      
      // Clean up previous blob URL if it exists
      if (currentBlobUrl) {
        URL.revokeObjectURL(currentBlobUrl);
      }
      
      const blob = new Blob([content], { type: 'text/html' });
      currentBlobUrl = URL.createObjectURL(blob);
      appFrame.src = currentBlobUrl;
      
      // Hide navigation bar when app is open
      toggleNavigationBar(true);
    }

    function closeAppWindow() {
      const appWindow = document.getElementById('appWindow');
      appWindow.classList.remove('show');
      
      // Show navigation bar again
      toggleNavigationBar(false);
      hapticFeedback();
    }

    // Settings functions with more options
    function openSettings() {
      document.getElementById('settingsApp').classList.add('show');
      // Hide the settings badge if it was showing
      document.getElementById('settingsBadge').style.display = 'none';
      // Hide navigation bar when settings is open
      toggleNavigationBar(true);
      hapticFeedback();
    }

    function closeSettings() {
      document.getElementById('settingsApp').classList.remove('show');
      // Show navigation bar again
      toggleNavigationBar(false);
      hapticFeedback();
    }

    function toggleClockFormat() {
      is24HourFormat = !is24HourFormat;
      localStorage.setItem('clockFormat', is24HourFormat ? '24h' : '12h');
      updateTime();
      updateLockTime();
      hapticFeedback();
    }

    function toggleDarkMode() {
      isDarkMode = !isDarkMode;
      localStorage.setItem('darkMode', isDarkMode ? 'enabled' : 'disabled');
      applyDarkMode();
      hapticFeedback();
    }

    function applyDarkMode() {
      if (isDarkMode) {
        document.querySelector('.watch-face').style.backgroundColor = 'var(--watch-black)';
      } else {
        document.querySelector('.watch-face').style.backgroundColor = 'var(--watch-white)';
      }
    }

    function resetBackground() {
      document.getElementById('watchFaceBg').style.backgroundImage = '';
      localStorage.removeItem('watchBackground');
      showNotification('Wallpaper', 'Background reset to default');
      hapticFeedback();
    }

    function resetAllApps() {
      showModalConfirmation(
        'Reset All Apps', 
        'Are you sure you want to remove all installed apps? This cannot be undone.',
        () => {
          installedApps = [];
          localStorage.setItem('installedApps', JSON.stringify(installedApps));
          renderInstalledApps();
          updateInstalledAppsCount();
          showNotification('Apps Reset', 'All apps have been removed');
          hapticFeedback('success');
        }
      );
    }

    function showSystemInfo() {
      // Calculate memory usage (simulated)
      const memoryUsed = Math.floor(Math.random() * 200) + 100;
      const memoryTotal = 512;
      document.getElementById('memoryUsage').textContent = `${memoryUsed}MB / ${memoryTotal}MB`;
      
      // Calculate storage usage
      const storageUsed = installedApps.reduce((acc, app) => acc + app.content.length, 0);
      const storageTotal = 1024 * 1024 * 4; // 4MB simulated storage
      document.getElementById('storageUsage').textContent = `${Math.round(storageUsed / 1024)}KB / ${Math.round(storageTotal / 1024)}KB`;
      
      document.getElementById('systemInfoModal').classList.add('show');
      hapticFeedback();
    }

    function closeSystemInfo() {
      document.getElementById('systemInfoModal').classList.remove('show');
      hapticFeedback();
    }

    function showAbout() {
      document.getElementById('aboutModal').classList.add('show');
      hapticFeedback();
    }

    function closeAbout() {
      document.getElementById('aboutModal').classList.remove('show');
      hapticFeedback();
    }

    // Lock screen functions with enhanced animation
    function toggleLockScreen() {
      const lockScreen = document.getElementById('lockScreen');
      const watchContainer = document.querySelector('.watch-container');
      
      if (lockScreen.classList.contains('show')) {
        // Unlock action
        lockScreen.classList.remove('show');
        watchContainer.classList.remove('lock-screen-active');
        
        setTimeout(() => {
          lockScreen.style.display = 'none';
        }, 300);
        
        // Reset inactivity timer when unlocking
        resetInactivityTimer();
      } else {
        // Lock action
        updateLockTime();
        lockScreen.style.display = 'flex';
        setTimeout(() => {
          lockScreen.classList.add('show');
          watchContainer.classList.add('lock-screen-active');
        }, 10);
      }
      
      hapticFeedback();
    }

    function resetInactivityTimer() {
      clearTimeout(inactivityTimer);
      inactivityTimer = setTimeout(() => {
        const lockScreen = document.getElementById('lockScreen');
        if (!lockScreen.classList.contains('show')) {
          toggleLockScreen();
        }
      }, 120000); // 2 minutes of inactivity
    }

    // Notification system
    function showNotification(title, message) {
      const notifications = document.getElementById('notifications');
      const notification = document.createElement('div');
      notification.className = 'notification';
      notification.id = `notification-${++notificationId}`;
      notification.innerHTML = `
        <div class="notification-title">${title}</div>
        <div class="notification-message">${message}</div>
      `;
      
      notifications.appendChild(notification);
      
      // Show notification
      setTimeout(() => {
        notification.classList.add('show');
      }, 10);
      
      // Auto-remove after 5 seconds
      setTimeout(() => {
        notification.classList.remove('show');
        setTimeout(() => {
          notification.remove();
        }, 300);
      }, 5000);
      
      // Show badge on settings if it's a system notification
      if (title === 'System' || title === 'Battery Low') {
        document.getElementById('settingsBadge').style.display = 'flex';
      }
    }

    function showWelcomeNotification() {
      setTimeout(() => {
        showNotification('WatchOS Pro', 'Welcome to your new smartwatch!');
      }, 1500);
    }

    // Navigation bar control
    function toggleNavigationBar(hide) {
      const navBar = document.getElementById('navigationBar');
      if (hide) {
        navBar.classList.add('hidden');
        navBarHidden = true;
      } else {
        navBar.classList.remove('hidden');
        navBarHidden = false;
      }
    }

    // Haptic feedback simulation
    function hapticFeedback(type = 'light') {
      if (type === 'error') {
        document.body.classList.add('haptic');
        setTimeout(() => {
          document.body.classList.remove('haptic');
        }, 300);
      }
      // Other types can be implemented similarly
    }

    // Check for updates (simulated)
    function checkForUpdates() {
      setTimeout(() => {
        if (Math.random() < 0.3) { // 30% chance of "update available"
          showNotification('System', 'Update available for WatchOS Pro');
          document.getElementById('settingsBadge').style.display = 'flex';
        }
      }, 10000);
    }

    // Confirmation modal
    function showModalConfirmation(title, message, confirmCallback) {
      const modal = document.createElement('div');
      modal.className = 'modal show';
      modal.innerHTML = `
        <div class="modal-content scale-in">
          <div class="modal-title">${title}</div>
          <div style="color: var(--watch-white); margin-bottom: 15px; font-size: 14px;">${message}</div>
          <div class="modal-buttons">
            <button class="modal-button secondary" onclick="this.parentElement.parentElement.parentElement.remove()">Cancel</button>
            <button class="modal-button primary" onclick="this.parentElement.parentElement.parentElement.remove(); (${confirmCallback.toString()})()">Confirm</button>
          </div>
        </div>
      `;
      
      document.querySelector('.watch-container').appendChild(modal);
      hapticFeedback();
    }

    // Setup event listeners
    function setupEventListeners() {
      document.getElementById('clockFormatToggle').addEventListener('change', toggleClockFormat);
      document.getElementById('darkModeToggle').addEventListener('change', toggleDarkMode);
      
      // Load preferences
      if (localStorage.getItem('clockFormat') === '12h') {
        is24HourFormat = false;
        document.getElementById('clockFormatToggle').checked = false;
      }
      
      if (localStorage.getItem('darkMode') === 'disabled') {
        isDarkMode = false;
        document.getElementById('darkModeToggle').checked = false;
        applyDarkMode();
      }
      
      // Add event listeners for inactivity detection
      document.addEventListener('mousemove', resetInactivityTimer);
      document.addEventListener('keypress', resetInactivityTimer);
      document.addEventListener('click', resetInactivityTimer);
      document.addEventListener('touchstart', resetInactivityTimer);
      
      // Digital crown interaction
      document.querySelector('.digital-crown').addEventListener('click', () => {
        if (navBarHidden) {
          toggleNavigationBar(false);
        } else {
          toggleNavigationBar(true);
        }
        hapticFeedback();
      });
      
      // Side button interaction
      document.querySelector('.side-button').addEventListener('click', () => {
        const lockScreen = document.getElementById('lockScreen');
        if (!lockScreen.classList.contains('show')) {
          toggleLockScreen();
        }
      });
    }
    
    // Control Center Functions
let controlCenterSettings = {
  airplane: false,
  wifi: true,
  bluetooth: true,
  darkMode: true
};

function showControlCenter() {
  document.getElementById('controlCenter').classList.add('show');
  hideNavigationBar();
  updateToggleStates();
}

function hideControlCenter() {
  document.getElementById('controlCenter').classList.remove('show');
  showNavigationBar();
  hapticFeedback();
}

function toggleSetting(setting) {
  controlCenterSettings[setting] = !controlCenterSettings[setting];
  updateToggleStates();
  hapticFeedback();
  
  // Special cases
  if(setting === 'darkMode') {
    toggleDarkMode();
  }
  
  showNotification('Settings', `${setting} ${controlCenterSettings[setting] ? 'ON' : 'OFF'}`);
}

function updateToggleStates() {
  for(const setting in controlCenterSettings) {
    const toggle = document.getElementById(`${setting}Toggle`);
    if(toggle) {
      toggle.classList.toggle('active', controlCenterSettings[setting]);
    }
  }
}

function triggerFlashlight() {
  const watchFace = document.querySelector('.watch-face');
  watchFace.style.backgroundColor = 'white';
  watchFace.style.transition = 'background-color 0.3s';
  
  setTimeout(() => {
    watchFace.style.backgroundColor = controlCenterSettings.darkMode ? 'var(--watch-black)' : 'var(--watch-white)';
  }, 300);
  
  showNotification('Flashlight', 'Activated for 3 seconds');
  hapticFeedback('heavy');
  
  setTimeout(() => {
    watchFace.style.backgroundColor = controlCenterSettings.darkMode ? 'var(--watch-black)' : 'var(--watch-white)';
  }, 3000);
}

function pingPhone() {
  showNotification('Find My iPhone', 'Pinging nearby iPhone...');
  hapticFeedback('heavy');
  
  // Simulate delay
  setTimeout(() => {
    showNotification('Find My iPhone', 'iPhone detected nearby');
  }, 2000);
}

// Tambahkan event listener untuk swipe up
let startY;

document.querySelector('.watch-container').addEventListener('touchstart', (e) => {
  startY = e.touches[0].clientY;
}, {passive: true});

document.querySelector('.watch-container').addEventListener('touchmove', (e) => {
  if(startY - e.touches[0].clientY > 50) { // Swipe up
    showControlCenter();
  }
}, {passive: true});

    // Initialize the watch when DOM is loaded
    document.addEventListener('DOMContentLoaded', initWatch);
  </script>
</body>
</html>